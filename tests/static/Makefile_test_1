
CUDA_PATH = /usr/tce/packages/cuda/cuda-9.2.148

#CC	= nvcc
CC	=	/usr/workspace/wsa/laguna/latest_llvm/install/bin/clang++
LLVM_PASS       = -Xclang -load -Xclang /usr/workspace/wsa/laguna/fpchecker/FPChecker/src/libcudakernels.so \
-include Runtime.h -I/usr/workspace/wsa/laguna/fpchecker/FPChecker/src
#OP	= -arch=sm_60 -O0 
OP	= $(LLVM_PASS) -O0  -x cuda --cuda-gpu-arch=sm_60 -g
LINK	= -L${CUDA_PATH}/lib64/ -lcuda -lcudart


all:
	$(CC) -c compute.cu $(OP)
	$(CC) -c test_1.cu $(OP)
	$(CC) -o test_1 compute.o test_1.o $(LINK)

clean:
	rm *.o test_1
